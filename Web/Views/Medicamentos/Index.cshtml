@model modelo.Medicamentos_VM
@{
    ViewBag.Title = "Medicamentos";
}

@* Estilo del error *@
<style>
    form .error {
        color: red;
    }

    input.error {
        border-color: red;
    }
</style>

@* Creación Tabla medicamentos *@

<div id="DivTablaMedicamento" class="card p-5 rounded">
    <table id="TablaMedicamento" class="table-responsive table align-middle mb-0 bg-white w-100 table table-striped table-hover table-bordered rounded-2">
        <thead class="bg-light">
            <tr>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Precio Compra</th>
                <th>Precio Venta</th>
                <th>Stock</th>
                <th>Lote</th>
                <th>Vencimiento</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

@* Formulario para agregar medicamento *@

<div id="DivAgregarMedicamento" style="display:none" class="container shadow-lg p-4">
    <form class="row" id="FormAgregarMedicamento">
        <div class="col-6 pb-3">
            <label class="form-label">Nombre del Medicamento</label>
            @Html.EditorFor(model => model.Nombre, new { htmlAttributes = new { @class = "form-control", placeholder = "Ingrese el nombre" } })
            @Html.ValidationMessageFor(model => model.Nombre, null, new { @class = "text-danger" })
        </div>

        <div class="col-6 pb-3">
            <label class="form-label">Descripción</label>
            @Html.TextAreaFor(model => model.Descripcion, new { @class = "form-control", rows = "2", placeholder = "Descripción opcional" })
            @Html.ValidationMessageFor(model => model.Descripcion, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Precio Compra</label>
            <div class="input-group">
                <span class="input-group-text">C$</span>
                @Html.EditorFor(model => model.PrecioCompra, new { htmlAttributes = new { @class = "form-control", type = "number", step = "0.01", min = "0" } })
            </div>
            @Html.ValidationMessageFor(model => model.PrecioCompra, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Precio Venta</label>
            <div class="input-group">
                <span class="input-group-text">C$</span>
                @Html.EditorFor(model => model.PrecioVenta, new { htmlAttributes = new { @class = "form-control", type = "number", step = "0.01", min = "0" } })
            </div>
            @Html.ValidationMessageFor(model => model.PrecioVenta, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Stock</label>
            @Html.EditorFor(model => model.Stock, new { htmlAttributes = new { @class = "form-control", type = "number", min = "0" } })
            @Html.ValidationMessageFor(model => model.Stock, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Stock Mínimo</label>
            @Html.EditorFor(model => model.StockMinimo, new { htmlAttributes = new { @class = "form-control", type = "number", min = "0" } })
            @Html.ValidationMessageFor(model => model.StockMinimo, null, new { @class = "text-danger" })
        </div>

        <div class="col-4 pb-3">
            <label class="form-label">Fecha Ingreso</label>
            @Html.EditorFor(model => model.FechaIngreso, new { htmlAttributes = new { @class = "form-control", type = "date" } })
            @Html.ValidationMessageFor(model => model.FechaIngreso, null, new { @class = "text-danger" })
        </div>

        <div class="col-4 pb-3">
            <label class="form-label">Fecha Vencimiento</label>
            @Html.EditorFor(model => model.FechaVencimiento, new { htmlAttributes = new { @class = "form-control", type = "date" } })
            @Html.ValidationMessageFor(model => model.FechaVencimiento, null, new { @class = "text-danger" })
        </div>

        <div class="col-4 pb-3">
            <label class="form-label">Lote</label>
            @Html.EditorFor(model => model.Lote, new { htmlAttributes = new { @class = "form-control", placeholder = "Número de lote" } })
            @Html.ValidationMessageFor(model => model.Lote, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Proveedor</label>
            @Html.DropDownListFor(
            model => model.IdProveedor,
                        (SelectList)ViewBag.ListProveedores,
                        "Seleccione proveedor",
                        new { @class = "form-control" }
                        )
            @Html.ValidationMessageFor(model => model.IdProveedor, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Categoría</label>
            @Html.DropDownListFor(
                        model => model.IdCategoria,
                        (SelectList)ViewBag.ListCategorias,
                        "Seleccione categoría",
                        new { @class = "form-control" }
                        )
            @Html.ValidationMessageFor(model => model.IdCategoria, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Laboratorio</label>
            @Html.DropDownListFor(
                        model => model.IdLaboratorio,
                        (SelectList)ViewBag.ListLaboratorios,
                        "Seleccione laboratorio",
                        new { @class = "form-control" }
                        )
            @Html.ValidationMessageFor(model => model.IdLaboratorio, null, new { @class = "text-danger" })
        </div>

        <div class="col-3 pb-3">
            <label class="form-label">Presentación</label>
            @Html.DropDownListFor(
                        model => model.IdPresentacion,
                        (SelectList)ViewBag.ListPresentaciones,
                        "Seleccione presentación",
                        new { @class = "form-control" }
                        )
            @Html.ValidationMessageFor(model => model.IdPresentacion, null, new { @class = "text-danger" })
        </div>

        @* botones *@

        <div style="text-align: right; background-color: #D3CECE;" class="p-2 pt-2 mt-3">
            <button id="cancelButtonMedicamento" type="button" class="btn btn-danger">
                <i class="fa-solid fa-rotate-left"></i> Cancelar
            </button>
            <button type="button" id="GuardarDatosMedicamento" class="btn btn-primary">
                <i class="fa-solid fa-floppy-disk"></i> Agregar
            </button>
        </div>
    </form>
</div>

<div id="DivModificarMedicamento" style="display:none" class="container shadow-lg p-4">
    @* Aquí se mostrará el formulario de modificación *@
</div>

@section scripts {
    <script type="text/javascript" src="~/JSVistas/Medicamentos.js"></script>
}